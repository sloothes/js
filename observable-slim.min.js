var ObservableSlim=function(){paths=[];var e=[],r=[],t=[],n=null,o=function(a,l,i,s){var u=i||null,f=s||[{target:a,property:""}];paths.push(f),a instanceof Array&&(a.__length=a.length);var g=[],p=function(e,r,t){for(var n="",o=null,a=0;a<f.length;a++)o instanceof Array&&!isNaN(f[a].property)&&(f[a].property=o.indexOf(f[a].target)),n=n+"."+f[a].property,o=f[a].target;return n=(n=n+"."+r).substring(2),!0===t&&(n="/"+n.replace(/\./g,"/")),n},v=function(e){if(!0!==u.paused)if(!0===l)setTimeout(function(){if(e===g.length){var r=g.slice(0);g=[];for(var t=0;t<u.observers.length;t++)u.observers[t](r)}},10);else{var r=g.slice(0);g=[];for(var t=0;t<u.observers.length;t++)u.observers[t](r)}},c={get:function(e,n){if("__getTarget"===n)return e;if("__isProxy"===n)return!0;if("__getParent"===n)return function(e){if(void 0===e)e=1;var r,t=p(0,"__getParent").split(".");return t.splice(-(e+1),e+1),r=u.parentProxy,t.join(".").split(".").reduce(function(e,r){return e?e[r]:void 0},r||self)};var a=e[n];if(e instanceof Date&&a instanceof Function&&null!==a)return a.bind(e);if(a instanceof Object&&null!==a&&e.hasOwnProperty(n)){if(!0===a.__isProxy&&(a=a.__getTarget),a.__targetPosition>-1&&null!==r[a.__targetPosition])for(var i=t[a.__targetPosition],s=0,g=i.length;s<g;s++)if(u===i[s].observable)return i[s].proxy;var v=f.slice(0);return v.push({target:a,property:n}),o(a,l,u,v)}return a},deleteProperty:function(e,o){var a=!0;n===b&&(a=!1,n=null);var l=Object.assign({},e);if(g.push({type:"delete",target:e,property:o,newValue:null,previousValue:l[o],currentPath:p(0,o),jsonPointer:p(0,o,!0),proxy:b}),!0===a){u.changesPaused||delete e[o];for(var i=0,s=r.length;i<s&&e!==r[i];i++);for(var f=t[i]||[],c=f.length;c--;)f[c].proxy!==b&&(n=f[c].proxy,delete f[c].proxy[o])}return v(g.length),!0},set:function(e,o,a,l){a&&a.__isProxy&&(a=a.__getTarget);var i=!0;n===b&&(i=!1,n=null);var s=e[o];if(s!==a||!1===i||"length"===o&&e instanceof Array&&e.__length!==a){var f=!0,c=typeof s,h="update";if("undefined"===c&&(h="add"),g.push({type:h,target:e,property:o,newValue:a,previousValue:l[o],currentPath:p(0,o),jsonPointer:p(0,o,!0),proxy:b}),"length"===o&&e instanceof Array&&e.__length!==a&&(g[g.length-1].previousValue=e.__length,e.__length=a),!0===i){u.changesPaused||(e[o]=a),f=!1;for(var y=e.__targetPosition,_=t[y].length;_--;)if(u===t[y][_].observable&&null!==r[t[y][_].observable.parentTarget.__targetPosition]){f=!0;break}if(f){for(var d=t[y],P=0,x=d.length;P<x;P++)d[P].proxy!==b&&(n=d[P].proxy,d[P].proxy[o]=a);setTimeout(function(){if("object"===c&&null!==s){for(var n=Object.keys(e),o=0,a=n.length;o<a;o++)if(e[n[o]]===s)return;var l=!1;if(function e(r){for(var t=Object.keys(r),n=0,o=t.length;n<o;n++){var a=r[t[n]];if(a instanceof Object&&null!==a&&e(a),a===s)return void(l=!0)}}(e),!0===l)return;!function e(n){for(var o=Object.keys(n),a=0,l=o.length;a<l;a++){var i=n[o[a]];i instanceof Object&&null!==i&&e(i)}var s=-1;for(a=0,l=r.length;a<l;a++)if(n===r[a]){s=a;break}if(s>-1){for(var f=t[s],g=f.length;g--;)if(u===f[g].observable){f.splice(g,1);break}0==f.length&&(r[s]=null)}}(s)}},1e4)}}f&&v(g.length)}return!0}},h=a.__targetPosition;h>-1||Object.defineProperty(a,"__targetPosition",{value:r.length,writable:!1,enumerable:!1,configurable:!1});var b=new Proxy(a,c);null===u&&(u={parentTarget:a,domDelay:l,parentProxy:b,observers:[],paused:!1,path:f,changesPaused:!1},e.push(u));var y={target:a,proxy:b,observable:u};return h>-1?(null===r[h]&&(r[h]=a),t[h].push(y)):(r.push(a),t.push([y])),b};return{create:function(e,r,t){if(!0===e.__isProxy)e=e.__getTarget;var n=o(e,r);return"function"==typeof t&&this.observe(n,t),function e(r){for(var t=r.__getTarget,n=Object.keys(t),o=0,a=n.length;o<a;o++){var l=n[o];t[l]instanceof Object&&null!==t[l]&&e(r[l])}}(n),n},observe:function(r,t){for(var n=e.length;n--;)if(e[n].parentProxy===r){e[n].observers.push(t);break}},pause:function(r){for(var t=e.length,n=!1;t--;)if(e[t].parentProxy===r){e[t].paused=!0,n=!0;break}if(0==n)throw new Error("ObseravableSlim could not pause observable -- matching proxy not found.")},resume:function(r){for(var t=e.length,n=!1;t--;)if(e[t].parentProxy===r){e[t].paused=!1,n=!0;break}if(0==n)throw new Error("ObseravableSlim could not resume observable -- matching proxy not found.")},pauseChanges:function(r){for(var t=e.length,n=!1;t--;)if(e[t].parentProxy===r){e[t].changesPaused=!0,n=!0;break}if(0==n)throw new Error("ObseravableSlim could not pause changes on observable -- matching proxy not found.")},resumeChanges:function(r){for(var t=e.length,n=!1;t--;)if(e[t].parentProxy===r){e[t].changesPaused=!1,n=!0;break}if(0==n)throw new Error("ObseravableSlim could not resume changes on observable -- matching proxy not found.")},remove:function(n){for(var o=null,a=!1,l=e.length;l--;)if(e[l].parentProxy===n){o=e[l],a=!0;break}for(var i=t.length;i--;)for(var s=t[i].length;s--;)t[i][s].observable===o&&(t[i].splice(s,1),0===t[i].length&&(r[i]=null));!0===a&&e.splice(l,1)}}}();try{module.exports=ObservableSlim}catch(e){}